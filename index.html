<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5JJ0LMDQ4F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-5JJ0LMDQ4F');
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Welcome to Ready Set Fly!</title>

  <!-- Modern â€œInterâ€ font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      CSS Variables & Reset
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
    :root {
      --color-primary: #4f46e5;
      --color-primary-hover: #4338ca;
      --color-bg: #f9fafb;
      --color-text: #1f2937;
      --color-muted: #6b7280;
      --radius: 0.5rem;
      --transition: 0.3s ease;
    }
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0; padding: 0;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--color-bg);
      color: var(--color-text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      line-height: 1.6;
    }

    /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      HERO
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
    header {
      position: relative;
      height: 60vh;
      background: url('../../Assets/images/wingtip_clouds.jpg') center/cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    header::before {
      content: '';
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.4);
    }
    .hero-text {
      position: relative;
      color: #fff;
      font-size: clamp(2rem,5vw,3rem);
      font-weight: 700;
      text-align: center;
      padding: 1rem 2rem;
      background: rgba(0,0,0,0.5);
      border-radius: var(--radius);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      MAIN CONTENT
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
    main {
      flex: 1;
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
      padding: 4rem 2rem;
    }
    .hero-intro h2 {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    .hero-intro p {
      color: var(--color-muted);
    }

    /* FEATURE GRID */
    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px,1fr));
      gap: 1.5rem;
      margin: 2rem 0;
      list-style: none;
    }
    .features li {
      background: #fff;
      padding: 1.5rem;
      border-radius: var(--radius);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform var(--transition);
    }
    .features li:hover {
      transform: translateY(-4px);
    }
    .features li strong {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--color-text);
    }

    /* CTA BUTTONS */
    .cta-buttons {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 2rem;
    }
    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      color: #fff;
      background: var(--color-primary);
      border: none;
      border-radius: 999px;
      text-decoration: none;
      cursor: pointer;
      transition: background var(--transition), transform var(--transition);
    }
    .btn:hover {
      background: var(--color-primary-hover);
      transform: translateY(-2px);
    }

    /* APP PROMO */
    .app-promo {
      text-align: center;
      margin-bottom: 3rem;
    }
    .app-promo p {
      color: var(--color-muted);
      margin-bottom: 1rem;
    }
    .store-buttons {
      display: inline-flex;
      gap: 1rem;
    }
    .store-badge {
      width: 140px;
      transition: transform var(--transition);
    }
    .store-badge:hover {
      transform: translateY(-2px);
    }
    .social-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--color-text);
      text-decoration: none;
      font-weight: 500;
      transition: color var(--transition);
      margin-top: 1rem;
    }
    .social-link img {
      width: 24px;
      height: 24px;
      transition: transform var(--transition);
    }
    .social-link:hover {
      color: var(--color-primary);
    }
    .social-link:hover img {
      transform: translateY(-2px);
    }

    /* FOOTER */
    footer {
      background: #fff;
      border-top: 1px solid #e5e7eb;
      padding: 2rem;
      text-align: center;
      font-size: 0.875rem;
      color: var(--color-muted);
    }
    .footer-links {
      display: inline-flex;
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .footer-links a {
      color: var(--color-muted);
      text-decoration: none;
      transition: color var(--transition);
    }
    .footer-links a:hover {
      color: var(--color-primary);
    }

    /*â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      ORIGINAL MODAL STYLES (untouched)
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.4);
      align-items: center; justify-content: center;
      z-index: 1000;
    }
    .modal-content {
      background: white; padding: 1.5rem;
      border-radius: 0.5rem; width: 90%; max-width: 320px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .modal-content h3 {
      margin-top: 0; margin-bottom: 1rem;
    }
    .modal-content label {
      display: block; margin-bottom: 0.75rem; font-size: 0.9rem;
    }
    .modal-content input {
      width: 100%; padding: 0.5rem; font-size: 1rem;
      margin-top: 0.25rem; border: 1px solid #cbd5e0;
      border-radius: 0.25rem; box-sizing: border-box;
    }
    .password-wrapper {
      position: relative;
    }
    .password-wrapper .toggle-eye {
      position: absolute; right: 0.5rem; top: 50%;
      transform: translateY(-50%); cursor: pointer;
    }
    .modal-buttons {
      margin-top: 1rem; display: flex;
      justify-content: flex-end; gap: 0.5rem;
    }
    .modal-buttons button {
      padding: 0.5rem 1rem; border: none;
      background: #1d4ed8; color: white;
      border-radius: 0.25rem; cursor: pointer;
    }
    .modal-buttons button:hover {
      background: #2563eb;
    }

    /* RESPONSIVE */
    @media (max-width: 600px) {
      .features { grid-template-columns: 1fr; }
      main { padding: 2rem 1rem; }
    }
  </style>
</head>

<body>
  <header>
    <div class="hero-text">Welcome to Ready Set Fly!</div>
  </header>

  <main>
    <section class="hero-intro">
      <h2>Your gateway to the skies.</h2>
      <p>
        Discover the premier aircraft rental and traditional marketplaceâ€”where pilots and
        aviation enthusiasts can effortlessly browse and book top-rated airplanes
        for personal or business flights. Connect directly with vetted aircraft
        owners, compare competitive hourly rates, and unlock exclusive access to
        private Cessnas, Pipers, Beechcrafts, and more. Whether youâ€™re planning a
        cross-country trip or just practicing circuits, our streamlined booking
        platform and real-time availability calendar make renting a plane as easy
        as hailing a rideshare.
      </p>
    </section>

    <ul class="features">
      <li>
        <strong>Extensive Fleet Selection:</strong> Filter by aircraft type,
        location, price, and owner rating.
      </li>
      <li>
        <strong>Trusted Owner Network:</strong> All owners are
        background-checked and rated by real pilots.
      </li>
      <li>
        <strong>Instant Online Booking:</strong> View live availability, book
        in seconds, and manage your rental right from your dashboard.
      </li>
      <li>
        <strong>Secure Payments & Insurance:</strong> Automated invoicing,
        payment splitting, and optional insurance add-ons ensure peace of mind.
      </li>
      <li>
        <strong>Owner Revenue Optimization:</strong> Dynamic pricing tools,
        calendar sync, and built-in messaging keep your schedule full.
      </li>
    </ul>

    <div class="cta-buttons">
      <a href="rentals.html" class="btn">View Rentals</a>
      <a href="marketplace.html" class="btn">View Marketplace</a>
    </div>

    <div class="app-promo">
      <p>
        For full access to rentals and marketplace in your area, download
        the app today.
      </p>
      <div class="store-buttons">
        <a
          href="https://play.google.com/store/apps/details?id=com.readysetfly"
          target="_blank" rel="noopener"
        >
          <img
            src="../../Assets/images/googleplaystore.png"
            alt="Get it on Google Play"
            class="store-badge"
          />
        </a>
        <a
          href="https://apps.apple.com/app/idXXXXXXXXX"
          target="_blank" rel="noopener"
        >
          <img
            src="../../Assets/images/appleplaystore.jpg"
            alt="Download on the App Store"
            class="store-badge"
          />
        </a>
      </div>
      <a
        href="https://instagram.com/readysetflyus"
        class="social-link"
        target="_blank" rel="noopener"
        aria-label="Connect with us on Instagram"
      >
        <img
          src="../../Assets/images/instagram-logo.png"
          alt="Instagram logo"
        />
        <span>Follow us on Instagram</span>
      </a>
    </div>
  </main>

  <footer>
    &copy; 2025 Ready Set Fly, LLC
    <img
  src="../../Assets/images/RSF_Logo_02232025.png"
  alt="Ready Set Fly Logo"
  id="footerLogo"
  style="height:50px; cursor:pointer; margin:0 1rem;"
/>
    <div class="footer-links">
      <a href="#" id="footerCreate">Create Admin Account</a>
      <a href="contact.html" id="footerContact">Contact Us</a>
    </div>
  </footer>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h3>Admin Login</h3>
      <label>Email:
        <input type="email" id="loginEmail" />
      </label>
      <label>Password:
        <div class="password-wrapper">
          <input type="password" id="loginPassword" />
          <span class="toggle-eye" data-target="loginPassword"
            >ğŸ‘ï¸</span
          >
        </div>
      </label>
      <div class="modal-buttons">
        <button onclick="submitLogin()">Log In</button>
        <button onclick="closeLogin()">Cancel</button>
      </div>
    </div>
  </div>

  <!-- CREATE ADMIN MODAL -->
  <div id="createModal" class="modal">
    <div class="modal-content">
      <h3>Create Admin Account</h3>

      <label>Email:
        <input type="email" id="createEmail" />
      </label>
      <button
        type="button"
        id="sendCodeBtn"
        class="small"
        style="margin-top:0.5rem;"
      >
        Send Verification Code
      </button>

      <label
        id="codeLabel"
        style="display:none; margin-top:1rem;"
        >Verification Code:
        <input type="text" id="createVerificationCode" maxlength="6" />
      </label>

      <label style="display:block; margin-top:1rem;">Password:
        <div class="password-wrapper">
          <input type="password" id="createPassword" />
          <span class="toggle-eye" data-target="createPassword">ğŸ‘ï¸</span>
        </div>
      </label>
      <label>
        Confirm Password:
        <div class="password-wrapper">
          <input type="password" id="createPassword2" />
          <span class="toggle-eye" data-target="createPassword2">ğŸ‘ï¸</span>
        </div>
      </label>

      <div class="modal-buttons">
        <button onclick="submitCreate()">Create</button>
        <button onclick="closeCreate()">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    const ALLOWED_SPECIFIC = [
      "coryarmer@gmail.com",
      "bentley.amy24@gmail.com",
    ];
    const SESSION_KEY = "currentAdmin";
    const ACCOUNTS_KEY = "adminAccounts";
    const LOGIN_TS_KEY = "loginTimestamp";
    const SEVEN_DAYS_MS = 7 * 24 * 60 * 60 * 1000;

    // Detect if we're on the index page (so we only clear session there)
    const onIndexPage =
      location.pathname.endsWith("index.html") || location.pathname === "/";

    function getAccounts() {
      return JSON.parse(localStorage.getItem(ACCOUNTS_KEY) || "{}");
    }
    function saveAccounts(accts) {
      localStorage.setItem(ACCOUNTS_KEY, JSON.stringify(accts));
    }
    function isEmailAllowed(email) {
      const e = email.toLowerCase();
      return e.endsWith("@readysetfly.us") || ALLOWED_SPECIFIC.includes(e);
    }
    function setCurrentUser(email) {
      localStorage.setItem(SESSION_KEY, email.toLowerCase());
      localStorage.setItem(LOGIN_TS_KEY, Date.now().toString());
    }
    function clearCurrentUser() {
      localStorage.removeItem(SESSION_KEY);
      localStorage.removeItem(LOGIN_TS_KEY);
    }
    function isSessionValid() {
      const ts = parseInt(localStorage.getItem(LOGIN_TS_KEY) || "0", 10);
      return ts && Date.now() - ts < SEVEN_DAYS_MS;
    }

    function checkAutoRedirect() {
      const current = localStorage.getItem(SESSION_KEY);
      const accounts = getAccounts();

      if (current && accounts[current] && isSessionValid()) {
        window.location.href = "admin-dashboard.html";
      } else {
        // only clear on the index page, not after navigating back from dashboard
        if (onIndexPage) clearCurrentUser();
      }
    }

    // show/hide modals
    function loginAdmin() {
      document.getElementById("loginModal").style.display = "flex";
    }
    function closeLogin() {
      document.getElementById("loginModal").style.display = "none";
    }
    function createAdmin() {
      document.getElementById("createModal").style.display = "flex";
    }
    function closeCreate() {
      document.getElementById("createModal").style.display = "none";
    }

    // toggle password visibility
    document.querySelectorAll(".toggle-eye").forEach((el) => {
      el.addEventListener("click", () => {
        const inp = document.getElementById(el.dataset.target);
        inp.type = inp.type === "password" ? "text" : "password";
      });
    });

    window.addEventListener("DOMContentLoaded", () => {
      checkAutoRedirect();
      document
        .getElementById("footerLogo")
        .addEventListener("click", loginAdmin);
      document
        .getElementById("footerCreate")
        .addEventListener("click", createAdmin);
      document
        .getElementById("footerContact")
        .addEventListener("click", () => {
          window.location.href = "contact.html";
        });

      // â”€â”€â”€ SEND CODE BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      document
        .getElementById("sendCodeBtn")
        .addEventListener("click", async () => {
          const email = document
            .getElementById("createEmail")
            .value.trim()
            .toLowerCase();
          if (!email.endsWith("@readysetfly.us")) {
            return alert("You must use a @readysetfly.us email.");
          }
          try {
            const res = await fetch("/api/sendVerificationCode", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ email }),
            });
            if (!res.ok) throw new Error(await res.text());
            alert("Verification code sent to " + email);
            document.getElementById("codeLabel").style.display = "block";
          } catch (err) {
            alert("Error sending code: " + err.message);
          }
        });

      // â”€â”€â”€ OVERRIDE submitCreate WITH VERIFICATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      window.submitCreate = async function () {
        const email = document
          .getElementById("createEmail")
          .value.trim()
          .toLowerCase();
        const code = document
          .getElementById("createVerificationCode")
          .value.trim();
        const pass = document.getElementById("createPassword").value;
        const pass2 = document.getElementById("createPassword2").value;

        if (!email || !pass || !pass2) {
          return alert("Fill all fields.");
        }
        if (!email.endsWith("@readysetfly.us")) {
          return alert("Email must be @readysetfly.us.");
        }
        if (!code) {
          return alert("Enter the 6-digit verification code.");
        }

        // verify the code
        try {
          const verifyRes = await fetch("/api/verifyCode", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email, code }),
          });
          const { valid } = await verifyRes.json();
          if (!valid) return alert("Invalid or expired code.");
        } catch (err) {
          return alert("Verification error: " + err.message);
        }

        if (pass !== pass2) {
          return alert("Passwords do not match.");
        }

        // save account locally
        const accounts = getAccounts();
        accounts[email] = pass;
        saveAccounts(accounts);

        setCurrentUser(email);
        alert("Account createdâ€”redirecting to dashboard.");
        window.location.href = "admin-dashboard.html";
      };
    });

    function viewRentals() {
      window.location.href = "rentals.html";
    }
    function viewMarketplace() {
      window.location.href = "marketplace.html";
    }
  </script>
</body>
</html>
